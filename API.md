# Component API

## ui/gallery
Wrapper for [Swiper](http://www.idangero.us/sliders/swiper/)

### attachTo Options

Name | Type | Default | Description
-----|------|---------|------------
swiperConfig | hash| {} | config options for the Swiper; see "Options" section of [Swiper API](http://www.idangero.us/sliders/swiper/api.php)

### Events Received

#### uiGalleryContentReady
Let's the component know it can initialize the Swiper.

Data: None

#### uiGalleryWantsNextItem
Tell the Gallery/Swiper to transition to the next item.
Does nothing if `loop` config param is false (the default) and last item is active.

Data: None

#### uiGalleryWantsPrevItem
Tell the Gallery/Swiper to transition to the previous item.
Does nothing if `loop` config param is false (the default) and first item is active.

Data: None

#### uiGalleryWantsToGoToIndex
Tell the Gallery/Swiper to transition to a specific item index.

Data:

Name | Type | Required? | Description
-----|------|-----------|------------
index | int | yes | the index to go to
speed | int | no  | speed of animation in milliseconds; if unspecified the default speed for the swiper will be used; set to zero for no animation

### Events Sent

#### uiSwiperInitialized
Sent after the Swiper has been initialized.

Data:

Name | Type | Description
-----|------|------------
swiper | object | A Swiper instance. Refer to [Swiper API](http://www.idangero.us/sliders/swiper/api.php) for attributes and methods.

Note: Ideally use of the swiper instance should be limited and read-only. Calling methods of the swiper that change state breaks the encapsulation that the gallery component is designed to provide. For example: instead of calling `swiper.swiperNext()` trigger the event `uiGalleryWantsNextItem`. The main reason that this event is triggered with a reference to the swiper instance is to allow access to `swiper.support` (a hash of boolean flags that indicate browser features such as `touch`).

#### uiGallerySlideChanged
Sent whenever the active slide/item has changed. This happens in response to swiping and in response to events (uiGalleryWantsNextItem, etc).

Data:

Name | Type | Description
-----|------|------------
activeIndex | int | index of the currently active item
previousIndex | int | index of the previously active item
total | int | number of items/slides

#### uiGallerySlideClicked
Sent whenever a slide/item has been clicked.

Data:

Name | Type | Description
-----|------|------------
index | int | index of the clicked item

## ui/content
Populates the HTML content for the gallery based on an array of image urls.

### attachTo Options

None

### Events Received

#### dataGalleryContentAvailable
Tell the component the image urls to use.

Note: The image tags generated by the component don't have `src` attributes.
Instead they have `data-src`. The [image_loader](#uiimage_loader) component
is responsible for "lazy loading" images by moving the `data-src` attribute to `src`.

Data:

Name | Type | Required? | Description
-----|------|-----------|------------
urls | array of strings | yes | image urls

### Events Sent

#### uiGalleryContentReady
Sent after the HTML content has been added to node.

Data: None

## ui/counter
Displays the active item number and total number of items.

### attachTo Options

Name | Type | Default | Description
-----|------|---------|------------
activeSelector | string| ".js-ui-counter-active" | selector for active count
totalSelector | string| ".js-ui-counter-total" | selector for total count

### Events Received

#### dataGalleryContentAvailable
Tell the component the image urls to use. The displayed total is based on the length of the array.

Data:

Name | Type | Required? | Description
-----|------|-----------|------------
urls | array of strings | yes | image urls

#### uiGallerySlideChanged
Tell the component that the active slide has changed.

Data:

Name | Type | Required? | Description
-----|------|-----------|------------
activeIndex | int | yes | index of the currently active item

### Events Sent

None

## ui/navigation_buttons
Buttons for navigating to next and previous items.
Handles click events and triggers event requesting next or previous item.
Also (when gallery looping is disabled) sets a disabled class when appropriate (previous button is disabled when first item is active; next button is disabled when last item is active).

### attachTo Options

Name | Type | Default | Description
-----|------|---------|------------
previousSelector | string| ".js-ui-navigation-previous" | selector for button
nextSelector | string| ".js-ui-navigation-next" | selector for button
disabledClass | string | "disabled" | class to indicate that button is disabled

### Events Received

#### dataGalleryContentAvailable
Tell the component the image urls to use. Initial disabled states are based on number of urls.

Data:

Name | Type | Required? | Description
-----|------|-----------|------------
urls | array of strings | yes | image urls

#### uiSwiperInitialized
Tell the component whether looping is enabled.

Data:

Name | Type | Required? | Description
-----|------|-----------|------------
swiper | object | yes | A Swiper instance. Expected to have attribute `params` with attribute `loop`.

#### uiGallerySlideChanged
Tell the component that the active item has changed.

Data:

Name | Type | Required? | Description
-----|------|-----------|------------
activeIndex | int | yes | index of the currently active item
total | int | yes | total number of items

### Events Sent

#### uiGalleryWantsPrevItem
Sent when previous button clicked.

Data: None

#### uiGalleryWantsNextItem
Sent when next button clicked.

Data: None

## ui/image_loader
Handles lazy loading of images and image error events.

### attachTo Options

Name | Type | Default | Description
-----|------|---------|------------
errorUrl | string| undefined | url of a placeholder image to be displayed if the image fails to load
lazyLoadThreshold | int | undefined | The index where lazy loading is to start. If undefined, lazy loading is disabled.

### Events Received

#### uiGalleryContentReady
Tell the component to load the initial images.

Data: None

#### uiGalleryLazyLoadRequested
Tell the component to load the remaining images.

Data: None

### Events Sent

None

## ui/gallery_syncer
Keeps multiple galleries inside the same container in sync. Whenever the active index in one gallery changes, the others are told to go to the same index.

### attachTo Options

Name | Type | Default | Description
-----|------|---------|------------
componentsToSync | array of DOM elements| null (required option) | the elements to sync (each is assumed to have a gallery attached to it)

### Events Received

#### uiGallerySlideChanged
Tell the component that the active slide has changed.

Data:

Name | Type | Required? | Description
-----|------|-----------|------------
activeIndex | int | yes | index of the currently active item

### Events Sent

None

## ui/keyboard_navigation

FIXME
